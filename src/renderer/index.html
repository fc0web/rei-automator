<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rei Automator</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- ヘッダー -->
    <header class="header">
      <h1>Rei Automator</h1>
      <span class="version">v0.3.0</span>
    </header>

    <!-- ツールバー -->
    <div class="toolbar">
      <button id="btn-capture" class="toolbar-btn" title="画面をキャプチャ">
        📷 キャプチャ
      </button>
      <button id="btn-target" class="toolbar-btn" title="キャプチャ画像から座標を指定">
        🎯 座標指定
      </button>
      <div class="toolbar-separator"></div>
      <button id="btn-open" class="toolbar-btn" title="スクリプトを開く">
        📂 開く
      </button>
      <button id="btn-save" class="toolbar-btn" title="スクリプトを保存">
        💾 保存
      </button>
    </div>

    <!-- 日本語入力セクション -->
    <div class="section">
      <div class="section-header">
        <label for="japanese-input">日本語入力:</label>
        <button id="btn-convert" class="btn-small" disabled>
          🔄 コード生成
        </button>
      </div>
      <textarea
        id="japanese-input"
        class="input-area"
        placeholder="例：座標(500,400)をクリックして、3秒待って、&quot;Hello&quot;と入力&#10;例：100,200をクリックして500ミリ秒待つを5回繰り返す&#10;例：Ctrl+Cを押して、1秒待って、Ctrl+Vを押す"
      ></textarea>
    </div>

    <!-- Reiコードセクション -->
    <div class="section">
      <div class="section-header">
        <label for="rei-code">Reiコード:</label>
      </div>
      <textarea
        id="rei-code"
        class="code-area"
        placeholder="// Reiコードを記述してください&#10;// 例：&#10;click(100, 200)&#10;wait(3s)&#10;type(&quot;Hello&quot;)"
        spellcheck="false"
      ></textarea>
    </div>

    <!-- 実行ログ -->
    <div class="section">
      <div class="section-header">
        <label>実行ログ:</label>
        <button id="btn-clear-log" class="btn-small" onclick="document.getElementById('log-area').innerHTML=''">
          🗑 クリア
        </button>
      </div>
      <div id="log-area" class="log-area"></div>
    </div>

    <!-- 実行コントロール -->
    <div class="controls">
      <button id="btn-execute" class="btn-primary">
        ▶ 実行
      </button>
      <button id="btn-stop" class="btn-danger" disabled>
        ⏹ 停止
      </button>
      <button id="btn-pause" class="btn-secondary" disabled>
        ⏸ 一時停止
      </button>
      <div class="status">
        <span class="status-label">ステータス:</span>
        <span id="status-text" class="status-text">待機中</span>
      </div>
    </div>

    <!-- フッター -->
    <footer class="footer">
      <div class="footer-left">
        Powered by <strong>Rei Language</strong>
      </div>
      <div class="footer-right">
        © 2024-2026 Nobuki Fujimoto
      </div>
    </footer>
  </div>

  <!-- ========== キャプチャ・座標指定オーバーレイ ========== -->
  <div id="capture-overlay" class="capture-overlay" style="display:none;">
    <div class="capture-modal">
      <div class="capture-modal-header">
        <h2 id="capture-modal-title">📷 画面キャプチャ</h2>
        <div class="capture-modal-actions">
          <button id="btn-capture-new" class="btn-small" title="新しくキャプチャ">
            📷 再キャプチャ
          </button>
          <button id="btn-capture-close" class="btn-small btn-close-modal" title="閉じる">
            ✕ 閉じる
          </button>
        </div>
      </div>

      <div class="capture-toolbar">
        <label>挿入コマンド:</label>
        <select id="capture-command-type">
          <option value="click">click(x, y)</option>
          <option value="dblclick">dblclick(x, y)</option>
          <option value="rightclick">rightclick(x, y)</option>
          <option value="move">move(x, y)</option>
        </select>
        <span id="capture-coords" class="capture-coords">座標: ---</span>
      </div>

      <div class="capture-image-container" id="capture-image-container">
        <div id="capture-loading" class="capture-loading" style="display:none;">
          ⏳ キャプチャ中...
        </div>
        <div id="capture-empty" class="capture-empty">
          「📷 キャプチャ」ボタンまたは上の「📷 再キャプチャ」で画面をキャプチャ
        </div>
        <canvas id="capture-canvas" class="capture-canvas" style="display:none;"></canvas>
        <div id="capture-markers" class="capture-markers"></div>
      </div>

      <div class="capture-history">
        <label>選択した座標:</label>
        <div id="capture-history-list" class="capture-history-list">
          <span class="capture-history-empty">画像をクリックして座標を選択してください</span>
        </div>
        <div class="capture-history-actions">
          <button id="btn-insert-coords" class="btn-small" disabled>
            📋 コードに挿入
          </button>
          <button id="btn-clear-coords" class="btn-small" disabled>
            🗑 クリア
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
