<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rei Automator</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">

    <!-- ========== „Éò„ÉÉ„ÉÄ„Éº ========== -->
    <header id="app-header">
      <div class="header-left">
        <span class="app-logo">‚ö°</span>
        <span class="app-title">Rei Automator</span>
        <span class="phase-badge">Phase 8</span>
      </div>
      <div class="header-center">
        <span id="current-script-name" class="current-script" data-i18n-default="untitled-script"></span>
        <span id="dirty-indicator" class="dirty-dot" hidden>‚óè</span>
      </div>
      <div class="header-right">
        <button id="btn-new" class="header-btn" data-i18n-title="menu.file.new">üìÑ <span data-i18n="menu.file.new"></span></button>
        <button id="btn-save" class="header-btn" data-i18n-title="menu.file.save">üíæ <span data-i18n="menu.file.save"></span></button>
        <button id="btn-settings" class="header-btn icon-only" data-i18n-title="menu.tools.settings">‚öôÔ∏è</button>
      </div>
    </header>

    <!-- ========== „É°„Ç§„É≥„É¨„Ç§„Ç¢„Ç¶„Éà ========== -->
    <div id="main-layout">

      <!-- ===== „Çµ„Ç§„Éâ„Éë„Éç„É´ÔºàA: „Çπ„ÇØ„É™„Éó„ÉàÁÆ°ÁêÜÔºâ ===== -->
      <aside id="sidebar">
        <div class="sidebar-header">
          <span class="sidebar-title">üìÇ <span data-i18n="sidebar.scripts"></span></span>
          <button id="btn-sidebar-toggle" class="icon-btn" data-i18n-title="menu.window.close">‚óÄ</button>
        </div>

        <div class="sidebar-search">
          <input id="script-search" type="text" data-i18n-placeholder="sidebar.search" />
        </div>

        <div id="script-list" class="script-list">
          <!-- JavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
          <div class="empty-state" data-i18n="sidebar.noScripts"></div>
        </div>

        <div class="sidebar-footer">
          <button id="btn-import" class="sidebar-btn">üì• <span data-i18n="sidebar.import"></span></button>
          <button id="btn-export" class="sidebar-btn">üì§ <span data-i18n="sidebar.export"></span></button>
        </div>
      </aside>

      <!-- ===== „É°„Ç§„É≥„Ç®„É™„Ç¢ ===== -->
      <main id="main-area">

        <!-- „Ç®„Éá„Ç£„Çø„Çª„ÇØ„Ç∑„Éß„É≥ -->
        <section id="editor-section">
          <div class="section-toolbar">
            <div class="toolbar-left">
              <label class="toolbar-label">üìù <span data-i18n="editor.label"></span></label>
            </div>
            <div class="toolbar-right">
              <button id="btn-vars-toggle" class="toolbar-btn" data-i18n-title="panel.vars">üî§ <span data-i18n="panel.vars.short"></span></button>
              <button id="btn-nlp-toggle" class="toolbar-btn" data-i18n-title="editor.nlConvert">üáØüáµ <span data-i18n="editor.nlConvert.short"></span></button>
            </div>
          </div>

          <!-- D: „Éë„É©„É°„Éº„ÇøÂÖ•Âäõ„ÉÄ„Ç§„Ç¢„É≠„Ç∞„Ç®„É™„Ç¢ -->
          <div id="params-panel" class="params-panel" hidden>
            <div class="params-header">
              <span>‚öôÔ∏è <span data-i18n="params.title"></span></span>
              <button id="btn-params-close" class="icon-btn">‚úï</button>
            </div>
            <div id="params-inputs" class="params-inputs"></div>
            <div class="params-actions">
              <button id="btn-params-run" class="run-btn" data-i18n="params.runWith"></button>
              <button id="btn-params-cancel" class="cancel-btn" data-i18n="button.cancel"></button>
            </div>
          </div>

          <!-- „Çπ„ÇØ„É™„Éó„Éà„Ç®„Éá„Ç£„Çø -->
          <textarea id="script-editor" spellcheck="false"
            data-i18n-placeholder="editor.placeholder"></textarea>

          <!-- Êó•Êú¨Ë™ûÂÖ•Âäõ„Ç®„É™„Ç¢ -->
          <div id="nlp-area" class="nlp-area" hidden>
            <input id="nlp-input" type="text" data-i18n-placeholder="editor.nlInput" />
            <button id="btn-nlp-convert" class="nlp-btn" data-i18n="editor.nlConvert.btn"></button>
          </div>
        </section>

        <!-- ===== ÂÆüË°å„Ç≥„É≥„Éà„É≠„Éº„É´ ===== -->
        <div id="control-bar">
          <div class="control-left">
            <label class="control-label" data-i18n="control.onError"></label>
            <select id="error-policy" class="control-select">
              <option value="stop" data-i18n="control.stop"></option>
              <option value="skip" data-i18n="control.skip"></option>
              <option value="retry:2" data-i18n="control.retry2"></option>
              <option value="retry:3" data-i18n="control.retry3"></option>
              <option value="retry:5" data-i18n="control.retry5"></option>
            </select>
            <span class="control-divider">‚îÇ</span>
            <label class="control-label">‚ö° ÂÆüË°å„É¢„Éº„Éâ</label>
            <select id="exec-mode" class="control-select exec-mode-select">
              <option value="cursor">üñ±Ô∏è „Ç´„Éº„ÇΩ„É´</option>
              <option value="cursorless">üëª „Ç´„Éº„ÇΩ„É´„Å™„Åó</option>
            </select>
            <input id="exec-target-window" type="text" class="exec-target-input"
                   placeholder="ÂØæË±°„Ç¶„Ç£„É≥„Éâ„Ç¶ÂêçÔºà‰æã: „É°„É¢Â∏≥Ôºâ" hidden />
          </div>
          <div class="control-center">
            <button id="btn-run" class="run-btn large" data-i18n="button.run"></button>
            <button id="btn-stop" class="stop-btn large" disabled data-i18n="button.stop"></button>
          </div>
          <div class="control-right">
            <label class="toggle-label">
              <input id="step-mode-toggle" type="checkbox" />
              <span data-i18n="control.stepMode"></span>
            </label>
            <button id="btn-step-next" class="step-btn" disabled data-i18n-title="control.stepNext">‚è≠ <span data-i18n="control.next"></span></button>
            <button id="btn-step-continue" class="step-btn" disabled data-i18n-title="control.stepContinue">‚ñ∂‚ñ∂ <span data-i18n="control.continue"></span></button>
          </div>
        </div>

        <!-- ===== ‰∏ãÈÉ®„Éë„Éç„É´ ===== -->
        <div id="bottom-panels">
          <div class="panel-tabs">
            <button class="panel-tab active" data-panel="log">üìã <span data-i18n="log.title"></span></button>
            <button class="panel-tab" data-panel="vars">üî§ <span data-i18n="panel.vars"></span></button>
            <button class="panel-tab" data-panel="errors">‚ùå <span data-i18n="panel.errors"></span></button>
            <button class="panel-tab" data-panel="history">üìÖ <span data-i18n="panel.history"></span></button>
            <button class="panel-tab" data-panel="schedule">‚è∞ <span data-i18n="schedule.title"></span></button>
            <div class="tab-actions">
              <button id="btn-log-clear" class="tab-action-btn" data-i18n-title="log.clear">üóë</button>
              <button id="btn-log-export" class="tab-action-btn" data-i18n-title="button.save">üíæ</button>
            </div>
          </div>

          <div id="panel-log" class="panel-content active">
            <div id="log-container" class="log-container">
              <div class="log-empty" data-i18n="log.empty"></div>
            </div>
          </div>

          <div id="panel-vars" class="panel-content">
            <div class="vars-toolbar">
              <button id="btn-var-add" class="small-btn">+ <span data-i18n="panel.vars.add"></span></button>
            </div>
            <table id="vars-table" class="vars-table">
              <thead>
                <tr>
                  <th data-i18n="panel.vars.name"></th>
                  <th data-i18n="panel.vars.value"></th>
                  <th data-i18n="panel.vars.type"></th>
                  <th data-i18n="panel.vars.action"></th>
                </tr>
              </thead>
              <tbody id="vars-body">
                <tr class="empty-row">
                  <td colspan="4" data-i18n="panel.vars.empty"></td>
                </tr>
              </tbody>
            </table>
          </div>

          <div id="panel-errors" class="panel-content">
            <div id="errors-container" class="errors-container">
              <div class="log-empty" data-i18n="panel.errors.empty"></div>
            </div>
          </div>

          <div id="panel-history" class="panel-content">
            <div id="history-container" class="history-container">
              <div class="log-empty" data-i18n="panel.history.empty"></div>
            </div>
          </div>

          <div id="panel-schedule" class="panel-content">
            <div class="schedule-toolbar">
              <button id="btn-schedule-add" class="small-btn">+ <span data-i18n="schedule.add"></span></button>
            </div>
            <div id="schedule-list" class="schedule-list">
              <div class="log-empty" data-i18n="panel.schedule.empty"></div>
            </div>
          </div>
        </div>

      </main>
    </div><!-- /main-layout -->

  </div><!-- /app -->

  <!-- ========== „É¢„Éº„ÉÄ„É´: ÂêçÂâç‰ªò„Åç‰øùÂ≠ò ========== -->
  <div id="modal-save" class="modal" hidden>
    <div class="modal-content">
      <div class="modal-header">
        <span>üíæ <span data-i18n="modal.save.title"></span></span>
        <button class="modal-close icon-btn">‚úï</button>
      </div>
      <div class="modal-body">
        <label data-i18n="modal.save.name"></label>
        <input id="save-name-input" type="text" data-i18n-placeholder="modal.save.namePlaceholder" />
        <label data-i18n="modal.save.tags"></label>
        <input id="save-tags-input" type="text" data-i18n-placeholder="modal.save.tagsPlaceholder" />
      </div>
      <div class="modal-footer">
        <button id="btn-modal-save-confirm" class="run-btn" data-i18n="button.save"></button>
        <button class="modal-close cancel-btn" data-i18n="button.cancel"></button>
      </div>
    </div>
  </div>

  <!-- ========== „Çπ„ÉÜ„ÉÉ„ÉóÂÆüË°å„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº ========== -->
  <div id="step-indicator" class="step-indicator" hidden>
    <div class="step-indicator-inner">
      <span class="step-icon">‚è∏</span>
      <div class="step-info">
        <span id="step-line-info" class="step-line-info">Line 1</span>
        <code id="step-command-info" class="step-command-info"></code>
      </div>
      <div class="step-btns">
        <button id="btn-step-next-float" class="run-btn">‚è≠ <span data-i18n="control.next"></span></button>
        <button id="btn-step-continue-float" class="step-btn">‚ñ∂‚ñ∂ <span data-i18n="control.continue"></span></button>
      </div>
    </div>
  </div>

  <!-- ========== „Éà„Éº„Çπ„ÉàÈÄöÁü• ========== -->
  <div id="toast-container" class="toast-container"></div>

  <!-- ========== Phase 7: „Çπ„Ç±„Ç∏„É•„Éº„É´‰ΩúÊàê„É¢„Éº„ÉÄ„É´ ========== -->
  <div id="modal-schedule" class="modal" hidden>
    <div class="modal-content">
      <div class="modal-header">
        <span>‚è∞ <span data-i18n="schedule.create"></span></span>
        <button class="modal-close icon-btn">‚úï</button>
      </div>
      <div class="modal-body">
        <label data-i18n="schedule.nameLabel"></label>
        <input id="sched-name" type="text" data-i18n-placeholder="schedule.namePlaceholder" />

        <label data-i18n="schedule.targetScript"></label>
        <select id="sched-script" class="control-select wide">
          <option value="" data-i18n="schedule.selectScript"></option>
        </select>

        <label data-i18n="schedule.execType"></label>
        <select id="sched-type" class="control-select wide">
          <option value="once" data-i18n="schedule.once"></option>
          <option value="interval" data-i18n="schedule.intervalOption"></option>
          <option value="daily" data-i18n="schedule.daily"></option>
          <option value="weekly" data-i18n="schedule.weekly"></option>
        </select>

        <div id="sched-opt-once" class="sched-option">
          <label data-i18n="schedule.time"></label>
          <input id="sched-run-at" type="datetime-local" />
        </div>
        <div id="sched-opt-interval" class="sched-option" hidden>
          <label data-i18n="schedule.intervalMinutes"></label>
          <input id="sched-interval" type="number" min="1" value="30" />
        </div>
        <div id="sched-opt-daily" class="sched-option" hidden>
          <label data-i18n="schedule.time"></label>
          <input id="sched-daily-time" type="time" value="09:00" />
        </div>
        <div id="sched-opt-weekly" class="sched-option" hidden>
          <label data-i18n="schedule.dayOfWeek"></label>
          <select id="sched-weekly-day" class="control-select wide">
            <option value="1" data-i18n="day.mon"></option>
            <option value="2" data-i18n="day.tue"></option>
            <option value="3" data-i18n="day.wed"></option>
            <option value="4" data-i18n="day.thu"></option>
            <option value="5" data-i18n="day.fri"></option>
            <option value="6" data-i18n="day.sat"></option>
            <option value="0" data-i18n="day.sun"></option>
          </select>
          <label data-i18n="schedule.time"></label>
          <input id="sched-weekly-time" type="time" value="09:00" />
        </div>
      </div>
      <div class="modal-footer">
        <button id="btn-sched-confirm" class="run-btn" data-i18n="schedule.createBtn"></button>
        <button class="modal-close cancel-btn" data-i18n="button.cancel"></button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
